(function(e,r){'object'==typeof exports&&'undefined'!=typeof module?module.exports=r():'function'==typeof define&&define.amd?define(r):(e.goog=e.goog||{},e.goog.swlib=r())})(this,function(){'use strict';function e(be,_e){for(var ke,Ee=[],Ce=0,Ne=0,qe='',xe=_e&&_e.delimiter||'/';null!=(ke=D.exec(be));){var Te=ke[0],Ie=ke[1],we=ke.index;if(qe+=be.slice(Ne,we),Ne=we+Te.length,Ie){qe+=Ie[1];continue}var De=be[Ne],Se=ke[2],We=ke[3],Ae=ke[4],Me=ke[5],Pe=ke[6],je=ke[7];qe&&(Ee.push(qe),qe='');var Oe=ke[2]||xe,Re=Ae||Me;Ee.push({name:We||Ce++,prefix:Se||'',delimiter:Oe,optional:'?'===Pe||'*'===Pe,repeat:'+'===Pe||'*'===Pe,partial:null!=Se&&null!=De&&De!==Se,asterisk:!!je,pattern:Re?s(Re):je?'.*':'[^'+n(Oe)+']+?'})}return Ne<be.length&&(qe+=be.substr(Ne)),qe&&Ee.push(qe),Ee}function r(be){return encodeURI(be).replace(/[\/?#]/g,function(_e){return'%'+_e.charCodeAt(0).toString(16).toUpperCase()})}function t(be){return encodeURI(be).replace(/[?#]/g,function(_e){return'%'+_e.charCodeAt(0).toString(16).toUpperCase()})}function a(be){for(var _e=Array(be.length),Ee=0;Ee<be.length;Ee++)'object'==typeof be[Ee]&&(_e[Ee]=new RegExp('^(?:'+be[Ee].pattern+')$'));return function(Ce,Ne){for(var Ie,qe='',xe=Ce||{},ke=(Ne||{}).pretty?r:encodeURIComponent,Te=0;Te<be.length;Te++){if(Ie=be[Te],'string'==typeof Ie){qe+=Ie;continue}var De,we=xe[Ie.name];if(null==we)if(Ie.optional){Ie.partial&&(qe+=Ie.prefix);continue}else throw new TypeError('Expected "'+Ie.name+'" to be defined');if(I(we)){if(!Ie.repeat)throw new TypeError('Expected "'+Ie.name+'" to not repeat, but received `'+JSON.stringify(we)+'`');if(0===we.length)if(Ie.optional)continue;else throw new TypeError('Expected "'+Ie.name+'" to not be empty');for(var Se=0;Se<we.length;Se++){if(De=ke(we[Se]),!_e[Te].test(De))throw new TypeError('Expected all "'+Ie.name+'" to match "'+Ie.pattern+'", but received `'+JSON.stringify(De)+'`');qe+=(0===Se?Ie.prefix:Ie.delimiter)+De}continue}if(De=Ie.asterisk?t(we):ke(we),!_e[Te].test(De))throw new TypeError('Expected "'+Ie.name+'" to match "'+Ie.pattern+'", but received "'+De+'"');qe+=Ie.prefix+De}return qe}}function n(be){return be.replace(/([.+*?=^!:${}()[\]|\/\\])/g,'\\$1')}function s(be){return be.replace(/([=!:$\/()])/g,'\\$1')}function o(be,_e){return be.keys=_e,be}function d(be){return be.sensitive?'':'i'}function h(be,_e){var Ee=be.source.match(/\((?!\?)/g);if(Ee)for(var Ce=0;Ce<Ee.length;Ce++)_e.push({name:Ce,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return o(be,_e)}function l(be,_e,Ee){for(var Ce=[],Ne=0;Ne<be.length;Ne++)Ce.push(f(be[Ne],_e,Ee).source);var qe=new RegExp('(?:'+Ce.join('|')+')',d(Ee));return o(qe,_e)}function u(be,_e,Ee){return g(e(be,Ee),_e,Ee)}function g(be,_e,Ee){I(_e)||(Ee=_e||Ee,_e=[]),Ee=Ee||{};for(var ke,Ce=Ee.strict,Ne=!1!==Ee.end,qe='',xe=0;xe<be.length;xe++)if(ke=be[xe],'string'==typeof ke)qe+=n(ke);else{var Te=n(ke.prefix),Ie='(?:'+ke.pattern+')';_e.push(ke),ke.repeat&&(Ie+='(?:'+Te+Ie+')*'),Ie=ke.optional?ke.partial?Te+'('+Ie+')?':'(?:'+Te+'('+Ie+'))?':Te+'('+Ie+')',qe+=Ie}var we=n(Ee.delimiter||'/'),De=qe.slice(-we.length)===we;return Ce||(qe=(De?qe.slice(0,-we.length):qe)+'(?:'+we+'(?=$))?'),qe+=Ne?'$':Ce&&De?'':'(?='+we+'|$)',o(new RegExp('^'+qe,d(Ee)),_e)}function f(be,_e,Ee){return I(_e)||(Ee=_e||Ee,_e=[]),Ee=Ee||{},be instanceof RegExp?h(be,_e):I(be)?l(be,_e,Ee):u(be,_e,Ee)}function y({channel:be,cacheName:_e,url:Ee,source:Ce}){q.isInstance({channel:be},BroadcastChannel),q.isType({cacheName:_e},'string'),q.isType({source:Ce},'string'),q.isType({url:Ee},'string'),be.postMessage({type:'CACHE_UPDATED',meta:Ce,payload:{cacheName:_e,updatedUrl:Ee}})}function v({first:be,second:_e,headersToCheck:Ee}={}){if(!(be instanceof Response&&_e instanceof Response&&Ee instanceof Array))throw me.createError('responses-are-same-parameters-required');return Ee.every(Ce=>{return be.headers.has(Ce)===_e.headers.has(Ce)&&be.headers.get(Ce)===_e.headers.get(Ce)})}class b{constructor(be){this._errors=be}createError(be,_e){if(!(be in this._errors))throw new Error(`Unable to generate error '${be}'.`);let Ee=this._errors[be].replace(/\s+/g,' '),Ce=null;_e&&(Ee+=` [${_e.message}]`,Ce=_e.stack);const Ne=new Error;return Ne.name=be,Ne.message=Ee,Ne.stack=Ce,Ne}}const _={'not-in-sw':'sw-lib must be loaded in your service worker file.','unsupported-route-type':'Routes must be either a express style route string, a Regex to capture request URLs or a Route instance.','empty-express-string':'The Express style route string must have some characters, an empty string is invalid.','bad-revisioned-cache-list':`The 'cacheRevisionedAssets()' method expects`+`an array of revisioned urls like so: ['/example/hello.1234.txt', `+`{path: 'hello.txt', revision: '1234'}]`};var E=new b(_);const C={'express-route-requires-absolute-path':`When using ExpressRoute, you must
    provide a path that starts with a '/' character. You can only match
    same-origin requests. For more flexibility, use RegExpRoute.`};var N=new b(C),q={atLeastOne:function(_e){const Ee=Object.keys(_e);if(!Ee.some(Ce=>_e[Ce]!==void 0))throw Error('Please set at least one of the following parameters: '+Ee.map(Ce=>`'${Ce}'`).join(', '))},hasMethod:function(_e,Ee){const Ce=Object.keys(_e).pop(),Ne=typeof _e[Ce][Ee];if('function'!=Ne)throw Error(`The '${Ce}' parameter must be an object that exposes `+`a '${Ee}' method.`)},isInstance:function(_e,Ee){const Ce=Object.keys(_e).pop();if(!(_e[Ce]instanceof Ee))throw Error(`The '${Ce}' parameter must be an instance of `+`'${Ee.name}'`)},isOneOf:function(_e,Ee){const Ce=Object.keys(_e).pop();if(!Ee.includes(_e[Ce]))throw Error(`The '${Ce}' parameter must be set to one of the `+`following: ${Ee}`)},isType:function(_e,Ee){const Ce=Object.keys(_e).pop(),Ne=typeof _e[Ce];if(Ne!==Ee)throw Error(`The '${Ce}' parameter has the wrong type. `+`(Expected: ${Ee}, actual: ${Ne})`)},isSWEnv:function(){return'ServiceWorkerGlobalScope'in self&&self instanceof ServiceWorkerGlobalScope},isValue:function(_e,Ee){const Ce=Object.keys(_e).pop(),Ne=_e[Ce];if(Ne!==Ee)throw Error(`The '${Ce}' parameter has the wrong value. `+`(Expected: ${Ee}, actual: ${Ne})`)}};const x=['DELETE','GET','HEAD','POST','PUT'];class k{constructor({match:be,handler:_e,method:Ee}={}){q.isType({match:be},'function'),q.hasMethod({handler:_e},'handle'),this.match=be,this.handler=_e,Ee?(q.isOneOf({method:Ee},x),this.method=Ee):this.method='GET'}}var T=Array.isArray||function(be){return'[object Array]'==Object.prototype.toString.call(be)},I=T,w=f,D=new RegExp(['(\\\\.)','([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))'].join('|'),'g');w.parse=e,w.compile=function(_e,Ee){return a(e(_e,Ee))},w.tokensToFunction=a,w.tokensToRegExp=g;class S extends k{constructor({path:be,handler:_e,method:Ee}){if('/'!==be.substring(0,1))throw N.createError('express-route-requires-absolute-path');let Ce=[];const Ne=w(be,Ce);super({match:({url:qe})=>{if(qe.origin!==location.origin)return null;const xe=qe.pathname.match(Ne);if(!xe)return null;const ke={};return Ce.forEach((Te,Ie)=>{ke[Te.name]=xe[Ie+1]}),ke},handler:_e,method:Ee})}}class W extends k{constructor({regExp:be,handler:_e,method:Ee}){q.isInstance({regExp:be},RegExp),super({match:({url:Ce})=>{const Ne=Ce.href.match(be);return Ne?Ne.slice(1):null},handler:_e,method:Ee})}}class A{setDefaultHandler({handler:be}={}){q.hasMethod({handler:be},'handle'),this.defaultHandler=be}setCatchHandler({handler:be}={}){q.hasMethod({handler:be},'handle'),this.catchHandler=be}registerRoutes({routes:be}={}){q.isInstance({routes:be},Array),self.addEventListener('fetch',_e=>{const Ee=new URL(_e.request.url);if(Ee.protocol.startsWith('http')){let Ce;for(let Ne of be||[])if(Ne.method===_e.request.method){const qe=Ne.match({url:Ee,event:_e});if(qe){let xe=qe;Array.isArray(xe)&&0===xe.length?xe=void 0:xe.constructor===Object&&0===Object.keys(xe).length&&(xe=void 0),Ce=Ne.handler.handle({url:Ee,event:_e,params:xe});break}}!Ce&&this.defaultHandler&&(Ce=this.defaultHandler.handle({url:Ee,event:_e})),Ce&&this.catchHandler&&(Ce=Ce.catch(Ne=>{return this.catchHandler.handle({url:Ee,event:_e,error:Ne})})),Ce&&_e.respondWith(Ce)}})}registerRoute({route:be}={}){q.isInstance({route:be},k),this.registerRoutes({routes:[be]})}}class M{constructor(){this._router=new A}registerRoute(be,_e){if('function'==typeof _e&&(_e={handle:_e}),'string'==typeof be){if(0===be.length)throw E.createError('empty-express-string');this._router.registerRoute({route:new S({path:be,handler:_e})})}else if(be instanceof RegExp)this._router.registerRoute({route:new W({regExp:be,handler:_e})});else if(be instanceof k)this._router.registerRoute({route:be});else throw E.createError('unsupported-route-type')}}const P={'not-in-sw':'sw-precaching must be loaded in your service worker file.','invalid-revisioned-entry':`File manifest entries must be either a `+`string with revision info in the url or an object with a 'url' and `+`'revision' parameters.`,'invalid-unrevisioned-entry':``,'bad-cache-bust':`The cache bust parameter must be a boolean.`,'duplicate-entry-diff-revisions':`An attempt was made to cache the same `+`url twice with each having different revisions. This is not supported.`,'request-not-cached':`A request failed the criteria to be cached. By `+`default, only responses with 'response.ok = true' are cached.`,'should-override':'Method should be overridden by the extending class.'};var O=new b(P);let R=`sw-runtime-caching`;self&&self.registration&&(R+=`-${self.registration.scope}`);const U=R,B=['cacheDidUpdate','cacheWillMatch','cacheWillUpdate','fetchDidFail','requestWillFetch'];var F=new b({'multiple-cache-will-update-behaviors':'You cannot register more than one behavior that implements cacheWillUpdate.','multiple-cache-will-match-behaviors':'You cannot register more than one behavior that implements cacheWillMatch.','invalid-reponse-for-caching':'The fetched response could not be cached due to an invalid response code, by default only 20X responses can be cached.'}),K=function(be){return function(){var _e=be.apply(this,arguments);return new Promise(function(Ee,Ce){function Ne(qe,xe){try{var ke=_e[qe](xe),Te=ke.value}catch(Ie){return void Ce(Ie)}return ke.done?void Ee(Te):Promise.resolve(Te).then(function(Ie){Ne('next',Ie)},function(Ie){Ne('throw',Ie)})}return Ne('next')})}};class L{constructor({cacheName:be,behaviors:_e,fetchOptions:Ee,matchOptions:Ce}={}){if(be?(q.isType({cacheName:be},'string'),this.cacheName=be):this.cacheName=U,Ee&&(q.isType({fetchOptions:Ee},'object'),this.fetchOptions=Ee),Ce&&(q.isType({matchOptions:Ce},'object'),this.matchOptions=Ce),this.behaviorCallbacks={},_e&&(q.isInstance({behaviors:_e},Array),_e.forEach(Ne=>{for(let qe of B)'function'==typeof Ne[qe]&&(this.behaviorCallbacks[qe]||(this.behaviorCallbacks[qe]=[]),this.behaviorCallbacks[qe].push(Ne[qe].bind(Ne)))})),this.behaviorCallbacks.cacheWillUpdate&&1!==this.behaviorCallbacks.cacheWillUpdate.length)throw F.createError('multiple-cache-will-update-behaviors');if(this.behaviorCallbacks.cacheWillMatch&&1!==this.behaviorCallbacks.cacheWillMatch.length)throw F.createError('multiple-cache-will-match-behaviors')}getCache(){var be=this;return K(function*(){return be._cache||(be._cache=yield caches.open(be.cacheName)),be._cache})()}match({request:be}){var _e=this;return K(function*(){q.atLeastOne({request:be});const Ee=yield _e.getCache();let Ce=yield Ee.match(be,_e.matchOptions);return _e.behaviorCallbacks.cacheWillMatch&&(Ce=_e.behaviorCallbacks.cacheWillMatch[0]({cachedResponse:Ce})),Ce})()}fetch({request:be}){var _e=this;return K(function*(){q.atLeastOne({request:be});try{if(_e.behaviorCallbacks.fetchDidFail)for(let Ee of _e.behaviorCallbacks.requestWillFetch)be=Ee({request:be});return yield fetch(be,_e.fetchOptions)}catch(Ee){if(_e.behaviorCallbacks.fetchDidFail)for(let Ce of _e.behaviorCallbacks.fetchDidFail)Ce({request:be});throw Ee}})()}fetchAndCache({request:be,waitOnCache:_e,cacheKey:Ee}){var Ce=this;return K(function*(){q.atLeastOne({request:be});let Ne;const qe=yield Ce.fetch({request:be});let xe=qe.ok;if(Ce.behaviorCallbacks.cacheWillUpdate&&(xe=Ce.behaviorCallbacks.cacheWillUpdate[0]({request:be,response:qe})),xe){const ke=qe.clone();Ne=Ce.getCache().then((()=>{var Te=K(function*(Ie){let we;'opaque'!==qe.type&&Ce.behaviorCallbacks.cacheDidUpdate&&(we=yield Ce.match({request:be})),yield Ie.put(Ee||be,ke);for(let De of Ce.behaviorCallbacks.cacheDidUpdate||[])De({cacheName:Ce.cacheName,oldResponse:we,newResponse:ke})});return function(Ie){return Te.apply(this,arguments)}})())}else if(!xe&&_e)throw F.createError('invalid-reponse-for-caching');return _e&&Ne&&(yield Ne),qe})()}}class H{constructor({requestWrapper:be}={}){this.requestWrapper=be?be:new L}handle({event:be,params:_e}={}){throw Error('This abstract method must be implemented in a subclass.')}}class $ extends H{handle({event:be}={}){var _e=this;return K(function*(){q.isInstance({event:be},FetchEvent);const Ee=yield _e.requestWrapper.match({request:be.request});return Ee||(yield _e.requestWrapper.fetchAndCache({request:be.request}))})()}}class G extends H{handle({event:be}={}){var _e=this;return K(function*(){return q.isInstance({event:be},FetchEvent),yield _e.requestWrapper.match({request:be.request})})()}}class V extends H{handle({event:be}={}){var _e=this;return K(function*(){q.isInstance({event:be},FetchEvent);let Ee;try{if(Ee=yield _e.requestWrapper.fetchAndCache({request:be.request}),Ee)return Ee}catch(Ce){}return yield _e.requestWrapper.match({request:be.request})})()}}class Y extends H{handle({event:be}={}){var _e=this;return K(function*(){return q.isInstance({event:be},FetchEvent),yield _e.requestWrapper.fetch({request:be.request})})()}}class z extends H{handle({event:be}={}){var _e=this;return K(function*(){q.isInstance({event:be},FetchEvent);const Ee=_e.requestWrapper.fetchAndCache({request:be.request}).catch(function(){return Response.error()}),Ce=yield _e.requestWrapper.match({request:be.request});return Ce||(yield Ee)})()}}class X{constructor(be){this._entriesToCache=new Map,this._requestWrapper=new L({cacheName:be,fetchOptions:{credentials:'same-origin'}}),this._cacheName=this._requestWrapper.cacheName}_addEntries(be){this._parsedCacheUrls=null,be.forEach(_e=>{this._addEntryToInstallList(this._parseEntry(_e))})}getCacheName(){return this._cacheName}getCachedUrls(){return this._parsedCacheUrls||(this._parsedCacheUrls=Array.from(this._entriesToCache.keys()).map(be=>new URL(be,location).href)),this._parsedCacheUrls}_addEntryToInstallList(be){const _e=be.entryID,Ee=this._entriesToCache.get(be.entryID);return Ee?void this._onDuplicateInstallEntryFound(be,Ee):void this._entriesToCache.set(_e,be)}install(){var be=this;return K(function*(){if(0!==be._entriesToCache.size){const _e=[];return be._entriesToCache.forEach(function(Ee){_e.push(be._cacheEntry(Ee))}),Promise.all(_e)}})()}_cacheEntry(be){var _e=this;return K(function*(){const Ee=yield _e._isAlreadyCached(be);if(!Ee)try{return yield _e._requestWrapper.fetchAndCache({request:be.getNetworkRequest(),waitOnCache:!0,cacheKey:be.request}),_e._onEntryCached(be)}catch(Ce){throw O.createError('request-not-cached',{message:`Failed to get a cacheable response for `+`'${be.request.url}': ${Ce.message}`})}})()}cleanup(){var be=this;return K(function*(){if(yield caches.has(be._cacheName)){const _e=[];be._entriesToCache.forEach(function(qe){_e.push(qe.request.url)});const Ee=yield be._getCache(),Ce=yield Ee.keys(),Ne=Ce.filter(function(qe){return!_e.includes(qe.url)});return Promise.all(Ne.map(function(qe){return Ee.delete(qe)}))}})()}_getCache(){var be=this;return K(function*(){return be._cache||(be._cache=yield caches.open(be._cacheName)),be._cache})()}_parseEntry(be){throw O.createError('should-override')}_onDuplicateEntryFound(be,_e){throw O.createError('should-override')}_isAlreadyCached(be){throw O.createError('should-override')}_onEntryCached(be){throw O.createError('should-override')}}var J=function(_e,Ee){return Ee={exports:{}},_e(Ee,Ee.exports),Ee.exports}(function(be){'use strict';(function(){function _e(Pe){return Array.prototype.slice.call(Pe)}function Ee(Pe){return new Promise(function(je,Oe){Pe.onsuccess=function(){je(Pe.result)},Pe.onerror=function(){Oe(Pe.error)}})}function Ce(Pe,je,Oe){var Re,Ue=new Promise(function(Be,Fe){Re=Pe[je].apply(Pe,Oe),Ee(Re).then(Be,Fe)});return Ue.request=Re,Ue}function Ne(Pe,je,Oe){var Re=Ce(Pe,je,Oe);return Re.then(function(Ue){if(Ue)return new we(Ue,Re.request)})}function qe(Pe,je,Oe){Oe.forEach(function(Re){Object.defineProperty(Pe.prototype,Re,{get:function(){return this[je][Re]},set:function(Ue){this[je][Re]=Ue}})})}function xe(Pe,je,Oe,Re){Re.forEach(function(Ue){Ue in Oe.prototype&&(Pe.prototype[Ue]=function(){return Ce(this[je],Ue,arguments)})})}function ke(Pe,je,Oe,Re){Re.forEach(function(Ue){Ue in Oe.prototype&&(Pe.prototype[Ue]=function(){return this[je][Ue].apply(this[je],arguments)})})}function Te(Pe,je,Oe,Re){Re.forEach(function(Ue){Ue in Oe.prototype&&(Pe.prototype[Ue]=function(){return Ne(this[je],Ue,arguments)})})}function Ie(Pe){this._index=Pe}function we(Pe,je){this._cursor=Pe,this._request=je}function De(Pe){this._store=Pe}function Se(Pe){this._tx=Pe,this.complete=new Promise(function(je,Oe){Pe.oncomplete=function(){je()},Pe.onerror=function(){Oe(Pe.error)},Pe.onabort=function(){Oe(Pe.error)}})}function We(Pe,je,Oe){this._db=Pe,this.oldVersion=je,this.transaction=new Se(Oe)}function Ae(Pe){this._db=Pe}qe(Ie,'_index',['name','keyPath','multiEntry','unique']),xe(Ie,'_index',IDBIndex,['get','getKey','getAll','getAllKeys','count']),Te(Ie,'_index',IDBIndex,['openCursor','openKeyCursor']),qe(we,'_cursor',['direction','key','primaryKey','value']),xe(we,'_cursor',IDBCursor,['update','delete']),['advance','continue','continuePrimaryKey'].forEach(function(Pe){Pe in IDBCursor.prototype&&(we.prototype[Pe]=function(){var je=this,Oe=arguments;return Promise.resolve().then(function(){return je._cursor[Pe].apply(je._cursor,Oe),Ee(je._request).then(function(Re){if(Re)return new we(Re,je._request)})})})}),De.prototype.createIndex=function(){return new Ie(this._store.createIndex.apply(this._store,arguments))},De.prototype.index=function(){return new Ie(this._store.index.apply(this._store,arguments))},qe(De,'_store',['name','keyPath','indexNames','autoIncrement']),xe(De,'_store',IDBObjectStore,['put','add','delete','clear','get','getAll','getKey','getAllKeys','count']),Te(De,'_store',IDBObjectStore,['openCursor','openKeyCursor']),ke(De,'_store',IDBObjectStore,['deleteIndex']),Se.prototype.objectStore=function(){return new De(this._tx.objectStore.apply(this._tx,arguments))},qe(Se,'_tx',['objectStoreNames','mode']),ke(Se,'_tx',IDBTransaction,['abort']),We.prototype.createObjectStore=function(){return new De(this._db.createObjectStore.apply(this._db,arguments))},qe(We,'_db',['name','version','objectStoreNames']),ke(We,'_db',IDBDatabase,['deleteObjectStore','close']),Ae.prototype.transaction=function(){return new Se(this._db.transaction.apply(this._db,arguments))},qe(Ae,'_db',['name','version','objectStoreNames']),ke(Ae,'_db',IDBDatabase,['close']),['openCursor','openKeyCursor'].forEach(function(Pe){[De,Ie].forEach(function(je){je.prototype[Pe.replace('open','iterate')]=function(){var Oe=_e(arguments),Re=Oe[Oe.length-1],Ue=this._store||this._index,Be=Ue[Pe].apply(Ue,Oe.slice(0,-1));Be.onsuccess=function(){Re(Be.result)}}})}),[Ie,De].forEach(function(Pe){Pe.prototype.getAll||(Pe.prototype.getAll=function(je,Oe){var Re=this,Ue=[];return new Promise(function(Be){Re.iterateCursor(je,function(Fe){return Fe?(Ue.push(Fe.value),void 0!==Oe&&Ue.length==Oe?void Be(Ue):void Fe.continue()):void Be(Ue)})})})});var Me={open:function(Pe,je,Oe){var Re=Ce(indexedDB,'open',[Pe,je]),Ue=Re.request;return Ue.onupgradeneeded=function(Be){Oe&&Oe(new We(Ue.result,Be.oldVersion,Ue.transaction))},Re.then(function(Be){return new Ae(Be)})},delete:function(Pe){return Ce(indexedDB,'deleteDatabase',[Pe])}};be.exports=Me})()});class Q{constructor(be,_e,Ee){if(be==void 0||_e==void 0||Ee==void 0)throw Error('name, version, storeName must be passed to the constructor.');this._name=be,this._version=_e,this._storeName=Ee}_getDb(){return this._dbPromise?this._dbPromise:(this._dbPromise=J.open(this._name,this._version,be=>{be.createObjectStore(this._storeName)}).then(be=>{return be}),this._dbPromise)}close(){return this._dbPromise?this._dbPromise.then(be=>{be.close(),this._dbPromise=null}):void 0}put(be,_e){return this._getDb().then(Ee=>{const Ce=Ee.transaction(this._storeName,'readwrite'),Ne=Ce.objectStore(this._storeName);return Ne.put(_e,be),Ce.complete})}delete(be){return this._getDb().then(_e=>{const Ee=_e.transaction(this._storeName,'readwrite'),Ce=Ee.objectStore(this._storeName);return Ce.delete(be),Ee.complete})}get(be){return this._getDb().then(_e=>{return _e.transaction(this._storeName).objectStore(this._storeName).get(be)})}getAllValues(){return this._getDb().then(be=>{return be.transaction(this._storeName).objectStore(this._storeName).getAll()})}getAllKeys(){return this._getDb().then(be=>{return be.transaction(this._storeName).objectStore(this._storeName).getAllKeys()})}}let Z=`sw-precaching-revisioned-${'v1'}`;self&&self.registration&&(Z+=`-${self.registration.scope}`);const ee=Z;class te{constructor(){this._idbHelper=new Q('sw-precaching','1','asset-revisions')}get(be){return this._idbHelper.get(be)}put(be,_e){return this._idbHelper.put(be,_e)}_close(){this._idbHelper.close()}}class ae{constructor({entryID:be,revision:_e,request:Ee,cacheBust:Ce}){this.entryID=be,this.revision=_e,this.request=Ee,this.cacheBust=Ce}getNetworkRequest(){if(!0!==this.cacheBust)return this.request;let be=this.request.url;const _e={};if(!0===this.cacheBust)if('cache'in Request.prototype)_e.cache='reload';else{const Ee=new URL(be,location);Ee.search+=(Ee.search?'&':'')+encodeURIComponent('_sw-precaching')+'='+encodeURIComponent(this.revision),be=Ee.toString()}return new Request(be,_e)}}class ne extends ae{constructor(be){if(q.isType({url:be},'string'),0===be.length)throw O.createError('invalid-revisioned-entry',new Error('Bad url Parameter. It should be a string:'+JSON.stringify(be)));super({entryID:be,revision:be,request:new Request(be),cacheBust:!1})}}class se extends ae{constructor({entryID:be,revision:_e,url:Ee,cacheBust:Ce}){if('undefined'==typeof Ce&&(Ce=!0),'undefined'==typeof be&&(be=new URL(Ee,location).toString()),q.isType({revision:_e},'string'),0===_e.length)throw O.createError('invalid-revisioned-entry',new Error('Bad revision Parameter. It should be a string with at least one character: '+JSON.stringify(_e)));if(q.isType({url:Ee},'string'),0===Ee.length)throw O.createError('invalid-revisioned-entry',new Error('Bad url Parameter. It should be a string:'+JSON.stringify(Ee)));if(q.isType({entryID:be},'string'),0===be.length)throw O.createError('invalid-revisioned-entry',new Error('Bad entryID Parameter. It should be a string with at least one character: '+JSON.stringify(be)));q.isType({cacheBust:Ce},'boolean'),super({entryID:be,revision:_e,request:new Request(Ee),cacheBust:Ce})}}class ie extends X{constructor({cacheName:be}={}){be=be||ee,super(be),this._revisionDetailsModel=new te}addToCacheList({revisionedFiles:be}={}){q.isInstance({revisionedFiles:be},Array),super._addEntries(be)}_parseEntry(be){if('undefined'==typeof be||null===be)throw O.createError('invalid-revisioned-entry',new Error('Invalid file entry: '+JSON.stringify(be)));let _e;switch(typeof be){case'string':_e=new ne(be);break;case'object':_e=new se(be);break;default:throw O.createError('invalid-revisioned-entry',new Error('Invalid file entry: '+JSON.stringify(_e)));}return _e}_onDuplicateInstallEntryFound(be,_e){if(_e.revision!==be.revision)throw O.createError('duplicate-entry-diff-revisions',new Error(`${JSON.stringify(_e)} <=> `+`${JSON.stringify(be)}`))}_isAlreadyCached(be){var _e=this;return K(function*(){const Ee=yield _e._revisionDetailsModel.get(be.entryID);if(Ee!==be.revision)return!1;const Ce=yield _e._getCache(),Ne=yield Ce.match(be.request);return!!Ne})()}_onEntryCached(be){var _e=this;return K(function*(){yield _e._revisionDetailsModel.put(be.entryID,be.revision)})()}_close(){this._revisionDetailsModel._close()}cleanup(){return super.cleanup().then(()=>{return this._close()})}}class oe extends ae{constructor(be){if(!(be instanceof Request))throw O.createError('invalid-unrevisioned-entry',new Error('Invalid file entry: '+JSON.stringify(be)));super({entryID:be.url,request:be,cacheBust:!1})}}class ce extends X{constructor({cacheName:be}={}){super(be)}addToCacheList({unrevisionedFiles:be}={}){q.isInstance({unrevisionedFiles:be},Array),super._addEntries(be)}_parseEntry(be){if('undefined'==typeof be||null===be)throw O.createError('invalid-unrevisioned-entry',new Error('Invalid file entry: '+JSON.stringify(be)));if('string'==typeof be)return new ne(be);if(be instanceof Request)return new oe(be);throw O.createError('invalid-unrevisioned-entry',new Error('Invalid file entry: '+JSON.stringify(be)))}_onDuplicateInstallEntryFound(be,_e){}_isAlreadyCached(be){return K(function*(){return!1})()}_onEntryCached(be){}}if(!q.isSWEnv())throw O.createError('not-in-sw');const de=`sw-cache-expiration-${self.registration.scope}`,he='url',le='timestamp';class pe{constructor({maxEntries:be,maxAgeSeconds:_e}={}){q.atLeastOne({maxEntries:be,maxAgeSeconds:_e}),be!==void 0&&q.isType({maxEntries:be},'number'),_e!==void 0&&q.isType({maxAgeSeconds:_e},'number'),this.maxEntries=be,this.maxAgeSeconds=_e,this._dbs=new Map,this._caches=new Map}getDB({cacheName:be}){var _e=this;return K(function*(){if(!_e._dbs.has(be)){const Ee=yield J.open(de,1,function(Ce){const Ne=Ce.createObjectStore(be,{keyPath:he});Ne.createIndex(le,le,{unique:!1})});_e._dbs.set(be,Ee)}return _e._dbs.get(be)})()}getCache({cacheName:be}){var _e=this;return K(function*(){if(!_e._caches.has(be)){const Ee=yield caches.open(be);_e._caches.set(be,Ee)}return _e._caches.get(be)})()}cacheWillMatch({cachedResponse:be}={}){return this.isResponseFresh({cachedResponse:be})?be:null}isResponseFresh({cachedResponse:be}={}){if(be&&this.maxAgeSeconds){q.isInstance({cachedResponse:be},Response);const _e=be.headers.get('date');if(_e){const Ee=Date.now(),Ce=new Date(_e);if(Ce.getTime()+1000*this.maxAgeSeconds<Ee)return!1}}return!0}cacheDidUpdate({cacheName:be,newResponse:_e}={}){q.isType({cacheName:be},'string'),q.isInstance({newResponse:_e},Response);const Ee=Date.now();this.updateTimestamp({cacheName:be,now:Ee,url:_e.url}).then(()=>{this.expireEntries({cacheName:be,now:Ee})})}updateTimestamp({cacheName:be,url:_e,now:Ee}){var Ce=this;return K(function*(){q.isType({url:_e},'string'),'undefined'==typeof Ee&&(Ee=Date.now());const Ne=yield Ce.getDB({cacheName:be}),qe=Ne.transaction(be,'readwrite');qe.objectStore(be).put({[le]:Ee,[he]:_e}),yield qe.complete})()}expireEntries({cacheName:be,now:_e}={}){var Ee=this;return K(function*(){'undefined'==typeof _e&&(_e=Date.now());const Ce=Ee.maxAgeSeconds?yield Ee.findOldEntries({cacheName:be,now:_e}):[],Ne=Ee.maxEntries?yield Ee.findExtraEntries({cacheName:be}):[],qe=[...new Set(Ce.concat(Ne))];return yield Ee.deleteFromCacheAndIDB({cacheName:be,urls:qe}),qe})()}findOldEntries({cacheName:be,now:_e}={}){var Ee=this;return K(function*(){q.isType({now:_e},'number');const Ce=_e-1000*Ee.maxAgeSeconds,Ne=[],qe=yield Ee.getDB({cacheName:be}),xe=qe.transaction(be,'readonly'),ke=xe.objectStore(be),Te=ke.index(le);return Te.iterateCursor(function(Ie){Ie&&(Ie.value[le]<Ce&&Ne.push(Ie.value[he]),Ie.continue())}),yield xe.complete,Ne})()}findExtraEntries({cacheName:be}){var _e=this;return K(function*(){const Ee=[],Ce=yield _e.getDB({cacheName:be}),Ne=Ce.transaction(be,'readonly'),qe=Ne.objectStore(be),xe=qe.index(le),ke=yield xe.count();return ke>_e.maxEntries&&xe.iterateCursor(function(Te){Te&&(Ee.push(Te.value[he]),ke-Ee.length>_e.maxEntries&&Te.continue())}),yield Ne.complete,Ee})()}deleteFromCacheAndIDB({cacheName:be,urls:_e}={}){var Ee=this;return K(function*(){if(q.isInstance({urls:_e},Array),0<_e.length){const Ce=yield Ee.getCache({cacheName:be}),Ne=yield Ee.getDB({cacheName:be});yield _e.forEach((()=>{var qe=K(function*(xe){yield Ce.delete(xe);const ke=Ne.transaction(be,'readwrite'),Te=ke.objectStore(be);yield Te.delete(xe),yield ke.complete});return function(xe){return qe.apply(this,arguments)}})())}})()}}const ue={'channel-name-required':`The channelName parameter is required when
    constructing a new Behavior`,'responses-are-same-parameters-required':`The first, second, and
    headersToCheck parameters must be valid when calling responsesAreSame()`};var me=new b(ue);const ge=['content-length','etag','last-modified'];class fe{constructor({channelName:be,headersToCheck:_e,source:Ee}={}){if('string'!=typeof be||0===be.length)throw me.createError('channel-name-required');this.channelName=be,this.headersToCheck=_e||ge,this.source=Ee||'sw-broadcast-cache-update'}get channel(){return this._channel||(this._channel=new BroadcastChannel(this.channelName)),this._channel}cacheDidUpdate({cacheName:be,oldResponse:_e,newResponse:Ee}){q.isType({cacheName:be},'string'),q.isInstance({newResponse:Ee},Response),_e&&this.notifyIfUpdated({cacheName:be,first:_e,second:Ee})}notifyIfUpdated({first:be,second:_e,cacheName:Ee}){q.isType({cacheName:Ee},'string'),v({first:be,second:_e,headersToCheck:this.headersToCheck})||y({cacheName:Ee,url:_e.url,channel:this.channel,source:this.source})}}class ye{constructor(){this._router=new M,this._revisionedCacheManager=new ie,this._unrevisionedCacheManager=new ce,this._registerInstallActivateEvents(),this._registerDefaultRoutes()}cacheRevisionedAssets(be){if(!Array.isArray(be))throw E.createError('bad-revisioned-cache-list');this._revisionedCacheManager.addToCacheList({revisionedFiles:be})}warmRuntimeCache(be){if(!Array.isArray(be))throw E.createError('bad-revisioned-cache-list');this._unrevisionedCacheManager.addToCacheList({unrevisionedFiles:be})}get router(){return this._router}get Route(){return k}cacheFirst(be){return this._getCachingMechanism($,be)}cacheOnly(be){return this._getCachingMechanism(G,be)}networkFirst(be){return this._getCachingMechanism(V,be)}networkOnly(be){return this._getCachingMechanism(Y,be)}staleWhileRevalidate(be){return this._getCachingMechanism(z,be)}_getCachingMechanism(be,_e={}){const Ee={cacheExpiration:pe,broadcastCacheUpdate:fe},Ce={behaviors:[]};_e.cacheName&&(Ce.cacheName=_e.cacheName);const Ne=Object.keys(Ee);return Ne.forEach(qe=>{if(_e[qe]){const xe=Ee[qe],ke=_e[qe];Ce.behaviors.push(new xe(ke))}}),_e.behaviors&&_e.behaviors.forEach(qe=>{Ce.behaviors.push(qe)}),new be({requestWrapper:new L(Ce)})}_registerInstallActivateEvents(){self.addEventListener('install',be=>{be.waitUntil(Promise.all([this._revisionedCacheManager.install(),this._unrevisionedCacheManager.install()]))}),self.addEventListener('activate',be=>{be.waitUntil(Promise.all([this._revisionedCacheManager.cleanup(),this._unrevisionedCacheManager.cleanup()]))})}_registerDefaultRoutes(){const be=this.cacheFirst({cacheName:this._revisionedCacheManager.getCacheName()}),_e=new this.Route({match:({url:Ee,event:Ce})=>{const Ne=this._revisionedCacheManager.getCachedUrls();return-1!==Ne.indexOf(Ee.href)},handler:be});this.router.registerRoute(_e)}}if(!q.isSWEnv())throw E.createError('not-in-sw');const ve=new ye;return ve});


/* LIB ================ */
!function(){"use strict";function e(){return t||(t=new Promise(function(e,n){var t=indexedDB.open("keyval-store",1);t.onerror=function(){n(t.error)},t.onupgradeneeded=function(){t.result.createObjectStore("keyval")},t.onsuccess=function(){e(t.result)}})),t}function n(n,t){return e().then(function(e){return new Promise(function(r,o){var u=e.transaction("keyval",n);u.oncomplete=function(){r()},u.onerror=function(){o(u.error)},t(u.objectStore("keyval"))})})}var t,r={get:function(e){var t;return n("readonly",function(n){t=n.get(e)}).then(function(){return t.result})},set:function(e,t){return n("readwrite",function(n){n.put(t,e)})},"delete":function(e){return n("readwrite",function(n){n["delete"](e)})},clear:function(){return n("readwrite",function(e){e.clear()})},keys:function(){var e=[];return n("readonly",function(n){(n.openKeyCursor||n.openCursor).call(n).onsuccess=function(){this.result&&(e.push(this.result.key),this.result["continue"]())}}).then(function(){return e})}};"undefined"!=typeof module&&module.exports?module.exports=r:"function"==typeof define&&define.amd?define("idbKeyval",[],function(){return r}):self.idbKeyval=r}();

/* IDB ================ */

/*! @license Firebase v3.6.9
    Build: 3.6.9-rc.1
    Terms: https://firebase.google.com/terms/ */
var firebase = null; (function() { var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,l=function(){l=function(){};h.Symbol||(h.Symbol=ba)},ca=0,ba=function(a){return"jscomp_symbol_"+(a||"")+ca++},n=function(){l();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=
h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return m(this)}});n=function(){}},m=function(a){var b=0;return da(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},da=function(a){n();a={next:a};a[h.Symbol.iterator]=function(){return this};return a},q=this,r=function(){},t=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);
if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},v=function(a){return"function"==t(a)},ea=function(a,
b,c){return a.call.apply(a.bind,arguments)},fa=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return w.apply(null,arguments)},x=function(a,b){var c=Array.prototype.slice.call(arguments,
1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}},y=function(a,b){function c(){}c.prototype=b.prototype;a.ba=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.aa=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var z;z="undefined"!==typeof window?window:"undefined"!==typeof self?self:global;function __extends(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}
function __decorate(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;g=z.Reflect;if("object"===typeof g&&"function"===typeof g.decorate)f=g.decorate(a,b,c,d);else for(var k=a.length-1;0<=k;k--)if(g=a[k])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f}function __metadata(a,b){var c=z.Reflect;if("object"===typeof c&&"function"===typeof c.metadata)return c.metadata(a,b)}
var __param=function(a,b){return function(c,d){b(c,d,a)}},__awaiter=function(a,b,c,d){return new (c||(c=Promise))(function(e,f){function g(a){try{p(d.next(a))}catch(u){f(u)}}function k(a){try{p(d.throw(a))}catch(u){f(u)}}function p(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(g,k)}p((d=d.apply(a,b)).next())})};"undefined"!==typeof z.M&&z.M||(z.__extends=__extends,z.__decorate=__decorate,z.__metadata=__metadata,z.__param=__param,z.__awaiter=__awaiter);var A=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};y(A,Error);A.prototype.name="CustomError";var ga=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};var B=function(a,b){b.unshift(a);A.call(this,ga.apply(null,b));b.shift()};y(B,A);B.prototype.name="AssertionError";var ha=function(a,b,c,d){var e="Assertion failed";if(c)var e=e+(": "+c),f=d;else a&&(e+=": "+a,f=b);throw new B(""+e,f||[]);},C=function(a,b,c){a||ha("",null,b,Array.prototype.slice.call(arguments,2))},D=function(a,b,c){v(a)||ha("Expected function but got %s: %s.",[t(a),a],b,Array.prototype.slice.call(arguments,2))};var E=function(a,b,c){this.T=c;this.N=a;this.U=b;this.s=0;this.o=null};E.prototype.get=function(){var a;0<this.s?(this.s--,a=this.o,this.o=a.next,a.next=null):a=this.N();return a};E.prototype.put=function(a){this.U(a);this.s<this.T&&(this.s++,a.next=this.o,this.o=a)};var F;a:{var ia=q.navigator;if(ia){var ja=ia.userAgent;if(ja){F=ja;break a}}F=""};var ka=function(a){q.setTimeout(function(){throw a;},0)},G,la=function(){var a=q.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==F.indexOf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+
"//"+b.location.host,a=w(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==F.indexOf("Trident")&&-1==F.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var a=c.G;c.G=null;a()}};return function(a){d.next={G:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in
document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){q.setTimeout(a,0)}};var H=function(){this.v=this.f=null},ma=new E(function(){return new I},function(a){a.reset()},100);H.prototype.add=function(a,b){var c=ma.get();c.set(a,b);this.v?this.v.next=c:(C(!this.f),this.f=c);this.v=c};H.prototype.remove=function(){var a=null;this.f&&(a=this.f,this.f=this.f.next,this.f||(this.v=null),a.next=null);return a};var I=function(){this.next=this.scope=this.B=null};I.prototype.set=function(a,b){this.B=a;this.scope=b;this.next=null};
I.prototype.reset=function(){this.next=this.scope=this.B=null};var M=function(a,b){J||na();K||(J(),K=!0);oa.add(a,b)},J,na=function(){if(-1!=String(q.Promise).indexOf("[native code]")){var a=q.Promise.resolve(void 0);J=function(){a.then(pa)}}else J=function(){var a=pa;!v(q.setImmediate)||q.Window&&q.Window.prototype&&-1==F.indexOf("Edge")&&q.Window.prototype.setImmediate==q.setImmediate?(G||(G=la()),G(a)):q.setImmediate(a)}},K=!1,oa=new H,pa=function(){for(var a;a=oa.remove();){try{a.B.call(a.scope)}catch(b){ka(b)}ma.put(a)}K=!1};var O=function(a,b){this.b=0;this.L=void 0;this.j=this.g=this.u=null;this.m=this.A=!1;if(a!=r)try{var c=this;a.call(b,function(a){N(c,2,a)},function(a){try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}N(c,3,a)})}catch(d){N(this,3,d)}},qa=function(){this.next=this.context=this.h=this.c=this.child=null;this.w=!1};qa.prototype.reset=function(){this.context=this.h=this.c=this.child=null;this.w=!1};
var ra=new E(function(){return new qa},function(a){a.reset()},100),sa=function(a,b,c){var d=ra.get();d.c=a;d.h=b;d.context=c;return d},ua=function(a,b,c){ta(a,b,c,null)||M(x(b,a))};O.prototype.then=function(a,b,c){null!=a&&D(a,"opt_onFulfilled should be a function.");null!=b&&D(b,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return va(this,v(a)?a:null,v(b)?b:null,c)};O.prototype.then=O.prototype.then;O.prototype.$goog_Thenable=!0;
O.prototype.X=function(a,b){return va(this,null,a,b)};var xa=function(a,b){a.g||2!=a.b&&3!=a.b||wa(a);C(null!=b.c);a.j?a.j.next=b:a.g=b;a.j=b},va=function(a,b,c,d){var e=sa(null,null,null);e.child=new O(function(a,g){e.c=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){g(L)}}:a;e.h=c?function(b){try{var e=c.call(d,b);a(e)}catch(L){g(L)}}:g});e.child.u=a;xa(a,e);return e.child};O.prototype.Y=function(a){C(1==this.b);this.b=0;N(this,2,a)};O.prototype.Z=function(a){C(1==this.b);this.b=0;N(this,3,a)};
var N=function(a,b,c){0==a.b&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.b=1,ta(c,a.Y,a.Z,a)||(a.L=c,a.b=b,a.u=null,wa(a),3!=b||ya(a,c)))},ta=function(a,b,c,d){if(a instanceof O)return null!=b&&D(b,"opt_onFulfilled should be a function."),null!=c&&D(c,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),xa(a,sa(b||r,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),
!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(v(f))return za(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1},za=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},k=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,g,k)}catch(p){k(p)}},wa=function(a){a.A||(a.A=!0,M(a.P,a))},Aa=function(a){var b=null;a.g&&(b=a.g,a.g=b.next,b.next=null);a.g||(a.j=null);null!=b&&C(null!=b.c);return b};
O.prototype.P=function(){for(var a;a=Aa(this);){var b=this.b,c=this.L;if(3==b&&a.h&&!a.w){var d;for(d=this;d&&d.m;d=d.u)d.m=!1}if(a.child)a.child.u=null,Ba(a,b,c);else try{a.w?a.c.call(a.context):Ba(a,b,c)}catch(e){Ca.call(null,e)}ra.put(a)}this.A=!1};var Ba=function(a,b,c){2==b?a.c.call(a.context,c):a.h&&a.h.call(a.context,c)},ya=function(a,b){a.m=!0;M(function(){a.m&&Ca.call(null,b)})},Ca=ka;function P(a,b){if(!(b instanceof Object))return b;switch(b.constructor){case Date:return new Date(b.getTime());case Object:void 0===a&&(a={});break;case Array:a=[];break;default:return b}for(var c in b)b.hasOwnProperty(c)&&(a[c]=P(a[c],b[c]));return a};O.all=function(a){return new O(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},g=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],ua(p,x(f,k),g);else b(e)})};O.resolve=function(a){if(a instanceof O)return a;var b=new O(r);N(b,2,a);return b};O.reject=function(a){return new O(function(b,c){c(a)})};O.prototype["catch"]=O.prototype.X;var Q=O;"undefined"!==typeof Promise&&(Q=Promise);var Da=Q;function Ea(a,b){a=new R(a,b);return a.subscribe.bind(a)}var R=function(a,b){var c=this;this.a=[];this.K=0;this.task=Da.resolve();this.l=!1;this.D=b;this.task.then(function(){a(c)}).catch(function(a){c.error(a)})};R.prototype.next=function(a){S(this,function(b){b.next(a)})};R.prototype.error=function(a){S(this,function(b){b.error(a)});this.close(a)};R.prototype.complete=function(){S(this,function(a){a.complete()});this.close()};
R.prototype.subscribe=function(a,b,c){var d=this,e;if(void 0===a&&void 0===b&&void 0===c)throw Error("Missing Observer.");e=Fa(a)?a:{next:a,error:b,complete:c};void 0===e.next&&(e.next=T);void 0===e.error&&(e.error=T);void 0===e.complete&&(e.complete=T);a=this.$.bind(this,this.a.length);this.l&&this.task.then(function(){try{d.H?e.error(d.H):e.complete()}catch(f){}});this.a.push(e);return a};
R.prototype.$=function(a){void 0!==this.a&&void 0!==this.a[a]&&(delete this.a[a],--this.K,0===this.K&&void 0!==this.D&&this.D(this))};var S=function(a,b){if(!a.l)for(var c=0;c<a.a.length;c++)Ga(a,c,b)},Ga=function(a,b,c){a.task.then(function(){if(void 0!==a.a&&void 0!==a.a[b])try{c(a.a[b])}catch(d){"undefined"!==typeof console&&console.error&&console.error(d)}})};R.prototype.close=function(a){var b=this;this.l||(this.l=!0,void 0!==a&&(this.H=a),this.task.then(function(){b.a=void 0;b.D=void 0}))};
function Fa(a){if("object"!==typeof a||null===a)return!1;var b;b=["next","error","complete"];n();var c=b[Symbol.iterator];b=c?c.call(b):m(b);for(c=b.next();!c.done;c=b.next())if(c=c.value,c in a&&"function"===typeof a[c])return!0;return!1}function T(){};var Ha=Error.captureStackTrace,V=function(a,b){this.code=a;this.message=b;if(Ha)Ha(this,U.prototype.create);else{var c=Error.apply(this,arguments);this.name="FirebaseError";Object.defineProperty(this,"stack",{get:function(){return c.stack}})}};V.prototype=Object.create(Error.prototype);V.prototype.constructor=V;V.prototype.name="FirebaseError";var U=function(a,b,c){this.V=a;this.W=b;this.O=c;this.pattern=/\{\$([^}]+)}/g};
U.prototype.create=function(a,b){void 0===b&&(b={});var c=this.O[a];a=this.V+"/"+a;var c=void 0===c?"Error":c.replace(this.pattern,function(a,c){a=b[c];return void 0!==a?a.toString():"<"+c+"?>"}),c=this.W+": "+c+" ("+a+").",c=new V(a,c),d;for(d in b)b.hasOwnProperty(d)&&"_"!==d.slice(-1)&&(c[d]=b[d]);return c};var W=Q,X=function(a,b,c){var d=this;this.I=c;this.J=!1;this.i={};this.C=b;this.F=P(void 0,a);a="serviceAccount"in this.F;("credential"in this.F||a)&&"undefined"!==typeof console&&console.log("The '"+(a?"serviceAccount":"credential")+"' property specified in the first argument to initializeApp() is deprecated and will be removed in the next major version. You should instead use the 'firebase-admin' package. See https://firebase.google.com/docs/admin/setup for details on how to get started.");Object.keys(c.INTERNAL.factories).forEach(function(a){var b=
c.INTERNAL.useAsService(d,a);null!==b&&(b=d.S.bind(d,b),d[a]=b)})};X.prototype.delete=function(){var a=this;return(new W(function(b){Y(a);b()})).then(function(){a.I.INTERNAL.removeApp(a.C);return W.all(Object.keys(a.i).map(function(b){return a.i[b].INTERNAL.delete()}))}).then(function(){a.J=!0;a.i={}})};X.prototype.S=function(a){Y(this);void 0===this.i[a]&&(this.i[a]=this.I.INTERNAL.factories[a](this,this.R.bind(this)));return this.i[a]};X.prototype.R=function(a){P(this,a)};
var Y=function(a){a.J&&Z("app-deleted",{name:a.C})};h.Object.defineProperties(X.prototype,{name:{configurable:!0,enumerable:!0,get:function(){Y(this);return this.C}},options:{configurable:!0,enumerable:!0,get:function(){Y(this);return this.F}}});X.prototype.name&&X.prototype.options||X.prototype.delete||console.log("dc");
function Ia(){function a(a){a=a||"[DEFAULT]";var b=d[a];void 0===b&&Z("no-app",{name:a});return b}function b(a,b){Object.keys(e).forEach(function(d){d=c(a,d);if(null!==d&&f[d])f[d](b,a)})}function c(a,b){if("serverAuth"===b)return null;var c=b;a=a.options;"auth"===b&&(a.serviceAccount||a.credential)&&(c="serverAuth","serverAuth"in e||Z("sa-not-supported"));return c}var d={},e={},f={},g={__esModule:!0,initializeApp:function(a,c){void 0===c?c="[DEFAULT]":"string"===typeof c&&""!==c||Z("bad-app-name",
{name:c+""});void 0!==d[c]&&Z("duplicate-app",{name:c});a=new X(a,c,g);d[c]=a;b(a,"create");void 0!=a.INTERNAL&&void 0!=a.INTERNAL.getToken||P(a,{INTERNAL:{getToken:function(){return W.resolve(null)},addAuthTokenListener:function(){},removeAuthTokenListener:function(){}}});return a},app:a,apps:null,Promise:W,SDK_VERSION:"0.0.0",INTERNAL:{registerService:function(b,c,d,u){e[b]&&Z("duplicate-service",{name:b});e[b]=c;u&&(f[b]=u);c=function(c){void 0===c&&(c=a());return c[b]()};void 0!==d&&P(c,d);return g[b]=
c},createFirebaseNamespace:Ia,extendNamespace:function(a){P(g,a)},createSubscribe:Ea,ErrorFactory:U,removeApp:function(a){b(d[a],"delete");delete d[a]},factories:e,useAsService:c,Promise:O,deepExtend:P}};g["default"]=g;Object.defineProperty(g,"apps",{get:function(){return Object.keys(d).map(function(a){return d[a]})}});a.App=X;return g}function Z(a,b){throw Ja.create(a,b);}
var Ja=new U("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain"});"undefined"!==typeof firebase&&(firebase=Ia()); }).call(this);
firebase.SDK_VERSION = "3.6.9";



/*! @license Firebase v3.6.9
    Build: 3.6.9-rc.1
    Terms: https://firebase.google.com/terms/ */
(function(){var f=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]},g=this,h=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=
typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},k=function(a,b){function c(){}c.prototype=b.prototype;a.B=b.prototype;a.prototype=new c;a.u=function(a,c,n){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];
return b.prototype[c].apply(a,d)}};var m={},p=(m["only-available-in-window"]="This method is available in a Window context.",m["only-available-in-sw"]="This method is available in a service worker context.",m["should-be-overriden"]="This method should be overriden by extended classes.",m["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",m["permission-default"]="The required permissions were not granted and dismissed instead.",m["permission-blocked"]="The required permissions were not granted and blocked instead.",
m["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",m["notifications-blocked"]="Notifications have been blocked.",m["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",m["sw-registration-expected"]="A service worker registration was the expected input.",m["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",m["invalid-saved-token"]="Unable to access details of the saved token.",
m["sw-reg-redundant"]="The service worker being used for push was made redundant.",m["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",m["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",m["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",m["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",m["invalid-delete-token"]=
"You must pass a valid token into deleteToken(), i.e. the token from getToken().",m["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",m["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",m["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",m["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",
m["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",m["failed-to-delete-token"]="Unable to delete the currently saved token.",m["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",m["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",m);var q={userVisibleOnly:!0,applicationServerKey:new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])};var r=function(a,b){var c={};return c["firebase-messaging-msg-type"]=a,c["firebase-messaging-msg-data"]=b,c};var u=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};k(u,Error);var v=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};var w=function(a,b){b.unshift(a);u.call(this,v.apply(null,b));b.shift()};k(w,u);var x=function(a,b,c){if(!a){var d="Assertion failed";if(b)var d=d+(": "+b),e=Array.prototype.slice.call(arguments,2);throw new w(""+d,e||[]);}};var y=null;var A=function(a){a=new Uint8Array(a);var b=h(a);x("array"==b||"object"==b&&"number"==typeof a.length,"encodeByteArray takes an array as a parameter");if(!y)for(y={},b=0;65>b;b++)y[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b);for(var b=y,c=[],d=0;d<a.length;d+=3){var e=a[d],n=d+1<a.length,l=n?a[d+1]:0,z=d+2<a.length,t=z?a[d+2]:0,M=e>>2,e=(e&3)<<4|l>>4,l=(l&15)<<2|t>>6,t=t&63;z||(t=64,n||(l=64));c.push(b[M],b[e],b[l],b[t])}return c.join("").replace(/\+/g,"-").replace(/\//g,
"_").replace(/=+$/,"")};var B=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",p),C=function(){this.a=null},D=function(a){if(a.a)return a.a;a.a=new Promise(function(a,c){var b=g.indexedDB.open("fcm_token_details_db",1);b.onerror=function(a){c(a.target.error)};b.onsuccess=function(b){a(b.target.result)};b.onupgradeneeded=function(a){a=a.target.result.createObjectStore("fcm_token_object_Store",{keyPath:"swScope"});a.createIndex("fcmSenderId","fcmSenderId",{unique:!1});a.createIndex("fcmToken","fcmToken",{unique:!0})}});
return a.a},E=function(a){a.a?a.a.then(function(b){b.close();a.a=null}):Promise.resolve()},F=function(a,b){return D(a).then(function(a){return new Promise(function(c,e){var d=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").index("fcmToken").get(b);d.onerror=function(a){e(a.target.error)};d.onsuccess=function(a){c(a.target.result)}})})},G=function(a,b){return D(a).then(function(a){return new Promise(function(c,e){var d=[],l=a.transaction(["fcm_token_object_Store"]).objectStore("fcm_token_object_Store").openCursor();
l.onerror=function(a){e(a.target.error)};l.onsuccess=function(a){(a=a.target.result)?(a.value.fcmSenderId===b&&d.push(a.value),a.continue()):c(d)}})})},H=function(a,b,c){var d=A(b.getKey("p256dh")),e=A(b.getKey("auth"));a="authorized_entity="+a+"&"+("endpoint="+b.endpoint+"&")+("encryption_key="+d+"&")+("encryption_auth="+e);c&&(a+="&pushSet="+c);c=new Headers;c.append("Content-Type","application/x-www-form-urlencoded");return fetch("https://fcm.googleapis.com/fcm/connect/subscribe",{method:"POST",
headers:c,body:a}).then(function(a){return a.json()}).then(function(a){if(a.error)throw B.create("token-subscribe-failed",{message:a.error.message});if(!a.token)throw B.create("token-subscribe-no-token");if(!a.pushSet)throw B.create("token-subscribe-no-push-set");return{token:a.token,pushSet:a.pushSet}})},I=function(a,b,c,d,e,n){var l={swScope:c.scope,endpoint:d.endpoint,auth:A(d.getKey("auth")),p256dh:A(d.getKey("p256dh")),fcmToken:e,fcmPushSet:n,fcmSenderId:b};return D(a).then(function(a){return new Promise(function(b,
c){var d=a.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").put(l);d.onerror=function(a){c(a.target.error)};d.onsuccess=function(){b()}})})};
C.prototype.i=function(a,b){return b instanceof ServiceWorkerRegistration?"string"!==typeof a||0===a.length?Promise.reject(B.create("bad-sender-id")):G(this,a).then(function(c){if(0!==c.length){var d=c.findIndex(function(c){return b.scope===c.swScope&&a===c.fcmSenderId});if(-1!==d)return c[d]}}).then(function(a){if(a)return b.pushManager.getSubscription().catch(function(){throw B.create("get-subscription-failed");}).then(function(b){var c;if(c=b)c=b.endpoint===a.endpoint&&A(b.getKey("auth"))===a.auth&&
A(b.getKey("p256dh"))===a.p256dh;if(c)return a.fcmToken})}):Promise.reject(B.create("sw-registration-expected"))};C.prototype.getSavedToken=C.prototype.i;
C.prototype.h=function(a,b){var c=this;return"string"!==typeof a||0===a.length?Promise.reject(B.create("bad-sender-id")):b instanceof ServiceWorkerRegistration?b.pushManager.getSubscription().then(function(a){return a?a:b.pushManager.subscribe(q)}).then(function(d){return H(a,d).then(function(e){return I(c,a,b,d,e.token,e.pushSet).then(function(){return e.token})})}):Promise.reject(B.create("sw-registration-expected"))};C.prototype.createToken=C.prototype.h;
C.prototype.deleteToken=function(a){var b=this;return"string"!==typeof a||0===a.length?Promise.reject(B.create("invalid-delete-token")):F(this,a).then(function(a){if(!a)throw B.create("delete-token-not-found");return D(b).then(function(b){return new Promise(function(c,d){var e=b.transaction(["fcm_token_object_Store"],"readwrite").objectStore("fcm_token_object_Store").delete(a.swScope);e.onerror=function(a){d(a.target.error)};e.onsuccess=function(b){0===b.target.result?d(B.create("failed-to-delete-token")):
c(a)}})})})};var J=function(a){var b=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",p);if(!a.options.messagingSenderId||"string"!==typeof a.options.messagingSenderId)throw this.a.create("bad-sender-id");this.l=a.options.messagingSenderId;this.c=new C;this.app=a;this.INTERNAL={};this.INTERNAL.delete=function(){return b.delete}};
J.prototype.getToken=function(){var a=this,b=Notification.permission;return"granted"!==b?"denied"===b?Promise.reject(this.a.create("notifications-blocked")):Promise.resolve(null):this.f().then(function(b){return a.c.i(a.l,b).then(function(c){return c?c:a.c.h(a.l,b)})})};J.prototype.getToken=J.prototype.getToken;J.prototype.deleteToken=function(a){var b=this;return this.c.deleteToken(a).then(function(){return b.f()}).then(function(a){return a?a.pushManager.getSubscription():null}).then(function(a){if(a)return a.unsubscribe()})};
J.prototype.deleteToken=J.prototype.deleteToken;J.prototype.f=function(){throw this.a.create("should-be-overriden");};J.prototype.requestPermission=function(){throw this.a.create("only-available-in-window");};J.prototype.useServiceWorker=function(){throw this.a.create("only-available-in-window");};J.prototype.useServiceWorker=J.prototype.useServiceWorker;J.prototype.onMessage=function(){throw this.a.create("only-available-in-window");};J.prototype.onMessage=J.prototype.onMessage;
J.prototype.onTokenRefresh=function(){throw this.a.create("only-available-in-window");};J.prototype.onTokenRefresh=J.prototype.onTokenRefresh;J.prototype.setBackgroundMessageHandler=function(){throw this.a.create("only-available-in-sw");};J.prototype.setBackgroundMessageHandler=J.prototype.setBackgroundMessageHandler;J.prototype.delete=function(){E(this.c)};var K=self,P=function(a){J.call(this,a);var b=this;this.a=new firebase.INTERNAL.ErrorFactory("messaging","Messaging",p);K.addEventListener("push",function(a){return L(b,a)},!1);K.addEventListener("pushsubscriptionchange",function(a){return N(b,a)},!1);K.addEventListener("notificationclick",function(a){return O(b,a)},!1);this.b=null};f(P,J);
var L=function(a,b){var c;try{c=b.data.json()}catch(e){return}var d=Q().then(function(b){if(b){if(c.notification||a.b)return R(a,c)}else{if((b=c)&&"object"===typeof b.notification){var d=Object.assign({},b.notification),e={};d.data=(e.FCM_MSG=b,e);b=d}else b=void 0;if(b)return K.registration.showNotification(b.title||"",b);if(a.b)return a.b(c)}});b.waitUntil(d)},N=function(a,b){var c=a.getToken().then(function(b){if(!b)throw a.a.create("no-fcm-token-for-resubscribe");var c=a.c;return F(c,b).then(function(b){if(!b)throw a.a.create("invalid-saved-token");
return K.registration.pushManager.subscribe(q).then(function(a){return H(b.w,a,b.v)}).catch(function(d){return c.deleteToken(b.A).then(function(){throw a.a.create("unable-to-resubscribe",{message:d});})})})});b.waitUntil(c)},O=function(a,b){if(b.notification&&b.notification.data&&b.notification.data.FCM_MSG){b.stopImmediatePropagation();b.notification.close();var c=b.notification.data.FCM_MSG,d=c.notification.click_action;if(d){var e=S(d).then(function(a){return a?a:K.clients.openWindow(d)}).then(function(b){if(b)return delete c.notification,
T(a,b,r("notification-clicked",c))});b.waitUntil(e)}}};P.prototype.setBackgroundMessageHandler=function(a){if(a&&"function"!==typeof a)throw this.a.create("bg-handler-function-expected");this.b=a};P.prototype.setBackgroundMessageHandler=P.prototype.setBackgroundMessageHandler;
var S=function(a){var b=(new URL(a)).href;return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(a){for(var c=null,e=0;e<a.length;e++)if((new URL(a[e].url)).href===b){c=a[e];break}if(c)return c.focus(),c})},T=function(a,b,c){return new Promise(function(d,e){if(!b)return e(a.a.create("no-window-client-to-msg"));b.postMessage(c);d()})},Q=function(){return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(a){return a.some(function(a){return"visible"===
a.visibilityState})})},R=function(a,b){return K.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(c){var d=r("push-msg-received",b);return Promise.all(c.map(function(b){return T(a,b,d)}))})};P.prototype.f=function(){return Promise.resolve(K.registration)};var V=function(a){J.call(this,a);var b=this;this.j=null;this.m=firebase.INTERNAL.createSubscribe(function(a){b.j=a});this.s=null;this.o=firebase.INTERNAL.createSubscribe(function(a){b.s=a});U(this)};f(V,J);
V.prototype.getToken=function(){var a=this;return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")?W(this).then(function(){return J.prototype.getToken.call(a)}):Promise.reject(this.a.create("unsupported-browser"))};V.prototype.getToken=V.prototype.getToken;
var W=function(a){if(a.g)return a.g;var b=document.querySelector('link[rel="manifest"]');b?a.g=fetch(b.href).then(function(a){return a.json()}).catch(function(){return Promise.resolve()}).then(function(b){if(b&&b.gcm_sender_id&&"103953800507"!==b.gcm_sender_id)throw a.a.create("incorrect-gcm-sender-id");}):a.g=Promise.resolve();return a.g};
V.prototype.requestPermission=function(){var a=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(b,c){var d=function(d){return"granted"===d?b():"denied"===d?c(a.a.create("permission-blocked")):c(a.a.create("permission-default"))},e=Notification.requestPermission(function(a){e||d(a)});e&&e.then(d)})};V.prototype.requestPermission=V.prototype.requestPermission;
V.prototype.useServiceWorker=function(a){if(!(a instanceof ServiceWorkerRegistration))throw this.a.create("sw-registration-expected");if("undefined"!==typeof this.b)throw this.a.create("use-sw-before-get-token");this.b=a};V.prototype.useServiceWorker=V.prototype.useServiceWorker;V.prototype.onMessage=function(a,b,c){return this.m(a,b,c)};V.prototype.onMessage=V.prototype.onMessage;V.prototype.onTokenRefresh=function(a,b,c){return this.o(a,b,c)};V.prototype.onTokenRefresh=V.prototype.onTokenRefresh;
var X=function(a,b){var c=b.installing||b.waiting||b.active;return new Promise(function(d,e){if(c)if("activated"===c.state)d(b);else if("redundant"===c.state)e(a.a.create("sw-reg-redundant"));else{var n=function(){if("activated"===c.state)d(b);else if("redundant"===c.state)e(a.a.create("sw-reg-redundant"));else return;c.removeEventListener("statechange",n)};c.addEventListener("statechange",n)}else e(a.a.create("no-sw-in-reg"))})};
V.prototype.f=function(){var a=this;if(this.b)return X(this,this.b);this.b=null;return navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(b){throw a.a.create("failed-serviceworker-registration",{browserErrorMessage:b.message});}).then(function(b){return X(a,b).then(function(){a.b=b;b.update();return b})})};
var U=function(a){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(b){if(b.data&&b.data["firebase-messaging-msg-type"])switch(b=b.data,b["firebase-messaging-msg-type"]){case "push-msg-received":case "notification-clicked":a.j.next(b["firebase-messaging-msg-data"])}},!1)};if(!(firebase&&firebase.INTERNAL&&firebase.INTERNAL.registerService))throw Error("Cannot install Firebase Messaging - be sure to load firebase-app.js first.");firebase.INTERNAL.registerService("messaging",function(a){return self&&"ServiceWorkerGlobalScope"in self?new P(a):new V(a)},{Messaging:V});}).call(this);



/* Firebase ================ */

goog.swlib.cacheRevisionedAssets([
  '/images/logo.svg',
  '/images/logo.png',
])

goog.swlib.warmRuntimeCache([
  '/',
  '/play',
]);

self.addEventListener('install', () => self.skipWaiting());
self.addEventListener('activate', () => self.clients.claim());
goog.swlib.router.registerRoute('/', goog.swlib.staleWhileRevalidate());
goog.swlib.router.registerRoute('/play', goog.swlib.staleWhileRevalidate());
goog.swlib.router.registerRoute(/\/public\/css\//, goog.swlib.cacheFirst());
goog.swlib.router.registerRoute(/\/public\/js\//, goog.swlib.cacheFirst());
goog.swlib.router.registerRoute(
  /https:\/\/images.pexels.com\//, goog.swlib.cacheFirst({
    cacheName: 'word-images',
  }));



firebase.initializeApp({
  'messagingSenderId': '678578574774'
});
const messaging = firebase.messaging();

messaging.setBackgroundMessageHandler(async function(payload) {
  console.log('[firebase-messaging-sw.js] Received background message ', payload);
  const gameData = await idbKeyval.get('game-data');
  gameData.wordReducer.giveNotificateionHint = true;
  await idbKeyval.set('game-data', gameData);
  // Customize notification here
  const notificationTitle = 'Guess!';
  const notificationOptions = {
    body: 'Free hint has arrived',
    icon: '/images/icons/icon-512x512.png'
  };

  return self.registration.showNotification(notificationTitle,
      notificationOptions);
});

self.addEventListener('notificationclick', event => {
    const rootUrl = new URL('/', location).href;
    event.notification.close();
    // Enumerate windows, and call window.focus(), or open a new one.
    event.waitUntil(
      clients.matchAll().then(matchedClients => {
        for (let client of matchedClients) {
          if (client.url === rootUrl) {
            return client.focus();
          }
        }
        return clients.openWindow("/");
      })
    );
});
